{% extends 'content/base.html' %}
{% block content %}
<body>
<div class="container">
    <div class="row">
    </div>
    <div class="row">
        <div class="feed-item">
            <h1>Post's update</h1>

            {% if object.user.photo %}
            <div class="media">
                <img class="rounded-circle account-img" src="{{ object.user.photo.url }}" width="100" height="100">
                <div class="media-body">
                    {% endif %}
                    {% if object.preview %}
                    <img src="{{ object.preview.url }}" alt="Preview" style="max-width: 57%;">
                    {% endif %}

                    <form method="post" enctype="multipart/form-data" id="update-form">

                        {% csrf_token %}

                        <div class="form-error">{{ form.non_field_errors }}</div>
                        {% for f in form %}
                        <p><label class="form-label" for="{{ f.id_for_label }}">{{f.label}}: </label>{{ f }}</p>
                        <div class="form-error">{{ f.errors }}</div>
                        {% endfor %}

                        <p>
                            <button type="submit">Save</button>
                        </p>
                    </form>
                </div>
            </div>
        </div>
</body>

<script>
  document.getElementById('update-form').addEventListener('submit', function(event) {
    event.preventDefault();
    fetch(this.action, {
      method: 'POST',
      body: new FormData(this)
    })
      .then(response => response.text())
      .then(result => {
        // Handle the result, e.g., show a success message or redirect to another page
      })
      .catch(error => {
        // Handle errors, e.g., show an error message
      });
  });
</script>

{% endblock %}
